{"mappings":"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","sources":["src/partials-js/authorization.js"],"sourcesContent":["import axios from 'axios';\n\n// auth modal login & signup\nconst signUp = document.querySelector('#signupbox');\nconst signIn = document.querySelector('#signinbox');\n\nconst btnIn = document.querySelector('.btn-in');\nconst btnUp = document.querySelector('.btn-up');\n\n// // Switches to 'Create Account'\nbtnUp.addEventListener('click', () => {\n  signUp.style.display = 'block';\n  signIn.style.display = 'none';\n});\n\n// // Switches to 'Sign In'\nbtnIn.addEventListener('click', () => {\n  signUp.style.display = 'none';\n  signIn.style.display = 'block';\n});\n\n//--------------\n//-----close auth modal\nconst closeButton = document.querySelector('button.auth-close');\nconst authModalRef = document.querySelector('.login-backdrop');\n\nconst fnCloseButton = () => {\n  authModalRef.classList.add('is-hidden');\n  authModalRef.classList.add('full-close');\n};\n\ncloseButton.addEventListener('click', () => {\n  fnCloseButton();\n});\n//----------------------\n\n//-------- auth request\n//const loginText = document.querySelector('.title-text .login');\nconst loginForm = document.querySelector('form#signinform');\nconst signupForm = document.querySelector('form#signupform');\n//const loginBtn = document.querySelector('button#loginsubmit');\n//const signupBtn = document.querySelector('button#signupsubmit');\n\nconst createUser = async (email, password) => {\n  const baseURL =\n    'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyC9fG7Shg0PcLy-7vLSSNqMkxzduprzfqU';\n  if (!email || !password) return;\n  try {\n    const data = await axios.post(baseURL, {\n      email,\n      password,\n      returnSecureToken: true,\n    });\n    //console.log(data);\n    return data;\n  } catch (error) {\n    //console.log(error.response.data.error.message.replaceAll('_', ' '));\n    //console.log(error);\n    return error;\n  }\n};\n\nconst authUser = async (email, password) => {\n  const baseURL =\n    'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC9fG7Shg0PcLy-7vLSSNqMkxzduprzfqU';\n  if (!email || !password) return;\n  try {\n    const data = await axios.post(baseURL, {\n      email,\n      password,\n      returnSecureToken: true,\n    });\n    //console.log(data);\n    return data;\n  } catch (error) {\n    // console.log(error.response.data.error.message.replace('_', ' '));\n    //console.log('-----------------------------');\n    //console.log(error);\n    return error;\n  }\n};\n\nconst getDb = async () => {\n  const baseURL =\n    'https://filmoteks-users-base-default-rtdb.europe-west1.firebasedatabase.app/data.json';\n  try {\n    const data = await axios.get(baseURL);\n    // console.log(data);\n    return data;\n  } catch (error) {\n    // console.log(error);\n    return error;\n  }\n};\n\nconst postDb = async item => {\n  const baseURL =\n    'https://filmoteks-users-base-default-rtdb.europe-west1.firebasedatabase.app/data.json';\n  try {\n    const data = await axios.patch(baseURL, item);\n    // console.log(data);\n    return data;\n  } catch (error) {\n    // console.log(error);\n    return error;\n  }\n};\n// console.log(createUser(email, password));\n// console.log(authUser(email, password));\n// console.log(postDb());\n// console.log(getDb());\n\n/// ---------- work html\n//const loginForm = document.querySelector('form.login');\nconst mailLogin = document.querySelector('[name=mailLogin]');\nconst pswdLogin = document.querySelector('[name=pswdLogin]');\n//const error = document.querySelector('#error');\n\nconst nameSignup = document.querySelector('[name=nameSignup]');\nconst emailSignup = document.querySelector('[name=emailSignup]');\nconst pswdSignup = document.querySelector('[name=pswdSignup]');\nconst pswdSignupConf = document.querySelector('[name=pswdSignupConf]');\nconst errorIn = document.querySelector('.errIn');\nconst errorUp = document.querySelector('.errUp');\n\nconst defaultErrorText = () => {\n  errorIn.textContent = '';\n  errorUp.textContent = '';\n  //   error.textContent = 'enter email and password';\n  //   error.textContent = 'new user';\n};\n\nconst clearFields = () => {\n  mailLogin.value = '';\n  pswdLogin.value = '';\n  nameSignup.value = '';\n  emailSignup.value = '';\n  pswdSignup.value = '';\n  pswdSignupConf.value = '';\n};\n\ndefaultErrorText();\n//console.dir(mailLogin);\nloginForm.addEventListener('submit', async ev => {\n  ev.preventDefault();\n  //console.log(mailLogin.value, pswdLogin.value);\n  if (!mailLogin.value || !pswdLogin.value) return;\n\n  mailLogin.value.trim();\n  const res = await authUser(mailLogin.value, pswdLogin.value);\n  //console.log(await res);\n\n  if ((await res.status) != 200) {\n    const message = res.response.data.error.message.replaceAll('_', ' ');\n    //const message = res.data.error.message.replaceAll('_', ' ');\n\n    //console.log(message);\n    errorIn.textContent = message;\n    loginForm.addEventListener('click', defaultErrorText);\n    //console.log(message.includes('email'));\n    if (message.includes('EMAIL')) {\n      mailLogin.classList.add('error-border');\n    }\n    console.log(message.includes('PASSWORD'));\n    if (message.includes('PASSWORD')) {\n      pswdLogin.classList.add('error-border');\n    }\n    return;\n  }\n\n  const userInfo = await getDb();\n\n  if (userInfo.status == 200) {\n    loginForm.removeEventListener('click', defaultErrorText);\n    defaultErrorText();\n    clearFields();\n    document.location.href = './my-library.html';\n  }\n\n  //const itemId = mailLogin.value.replace('@', '').replaceAll('.', '');\n});\n\nsignupForm.addEventListener('submit', async ev => {\n  ev.preventDefault();\n  //                      console.log(ev);\n  if (!emailSignup.value || !pswdSignup.value) return;\n  if (pswdSignup.value !== pswdSignupConf.value) return;\n  mailLogin.value.trim();\n\n  const res = await createUser(emailSignup.value, pswdSignup.value);\n  //console.log(res);\n\n  if ((await res.status) != 200) {\n    const message = res.response.data.error.message.replaceAll('_', ' ');\n    errorUp.textContent = message;\n    signupForm.addEventListener('click', defaultErrorText);\n\n    return;\n  }\n\n  // console.log('1-----------');\n  let idItem = emailSignup.value.replace('@', '').replaceAll('.', '');\n  const userItem = {};\n  userItem[idItem] = {\n    id: '',\n    name: nameSignup.value,\n    email: emailSignup.value,\n    password: pswdSignup.value,\n  };\n\n  const userInfo = await postDb(userItem);\n  if (userInfo.status == 200) {\n    signupForm.removeEventListener('click', defaultErrorText);\n    defaultErrorText();\n    clearFields();\n  }\n  //console.log(idItem);\n});\n"],"names":["$bpxeT","parcelRequire","$995fbd3748b70ec6$var$signUp","document","querySelector","$995fbd3748b70ec6$var$signIn","$995fbd3748b70ec6$var$btnIn","addEventListener","style","display","$995fbd3748b70ec6$var$closeButton","$995fbd3748b70ec6$var$authModalRef","classList","add","$995fbd3748b70ec6$var$loginForm","$995fbd3748b70ec6$var$signupForm","$995fbd3748b70ec6$var$createUser","$parcel$interopDefault","$2TvXO","mark","_callee","email","password","baseURL","data","$dIxxU","default","post","returnSecureToken","_ctx","sent","$995fbd3748b70ec6$var$authUser","$995fbd3748b70ec6$var$getDb","get","$995fbd3748b70ec6$var$postDb","item","patch","$995fbd3748b70ec6$var$mailLogin","$995fbd3748b70ec6$var$pswdLogin","$995fbd3748b70ec6$var$nameSignup","$995fbd3748b70ec6$var$emailSignup","$995fbd3748b70ec6$var$pswdSignup","$995fbd3748b70ec6$var$pswdSignupConf","$995fbd3748b70ec6$var$errorIn","$995fbd3748b70ec6$var$errorUp","$995fbd3748b70ec6$var$defaultErrorText","textContent","$995fbd3748b70ec6$var$clearFields","value","ev","res","message","preventDefault","trim","status","t0","response","error","replaceAll","includes","console","log","removeEventListener","location","href","idItem","userItem","replace","id","name"],"version":3,"file":"index.44a4f980.js.map"}