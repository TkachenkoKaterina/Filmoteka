{"mappings":"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","sources":["src/my-library.js","src/partials-js/watchedQueueSet.js"],"sourcesContent":["import './partials-js/refs';\nimport './partials-js/vars';\nimport './partials-js/onLoadPage';\nimport './partials-js/themeSwitch';\nimport './partials-js/authorization';\nimport './partials-js/openModal';\nimport './partials-js/addToWatch';\nimport './partials-js/watchedQueueSet';\nimport './partials-js/tuiPagination';\nimport './partials-js/footer-modal';\n","import {\n    API_KEY,\n    MAIN_PART_URL,\n    MOVIE_BY_ID_PART,\n    MOBILE_STUB,\n    TABLET_STUB,\n    DESKTOP_STUB,\n    BASE_IMG_URL,\n    DESKTOP_SIZES,\n    TABLET_SIZES,\n    MOBILE_SIZES\n} from './vars';\nimport { requestGet } from './requestGet';\n\nconst refs = {\n    movieList: document.querySelector('.movie__collection'),\n    watchedBtn: document.querySelector('input[value=\"Watched\"]'),\n    queueBtn: document.querySelector('input[value=\"Queue\"]'),\n}\n\n// --------- Тимчасово-----------//\n\nconst arrOfId = ['76600', '550', '12', '1038779'];\nconst arrOfIdwatched = ['76600','1038779', '12', '550'];\nlocalStorage.setItem(\"queue\", JSON.stringify(arrOfId));\nlocalStorage.setItem(\"watched\", JSON.stringify(arrOfIdwatched));\n\n//------------------------------//\n\ndocument.addEventListener('DOMContentLoaded', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n\nasync function onQueueBtnClick() {\n    refs.queueBtn.removeEventListener('click', onQueueBtnClick);\n    refs.movieList.innerHTML = '';\n\n    const arrOfQueueId = JSON.parse(localStorage.getItem(\"queue\"));\n    if (arrOfQueueId === null || arrOfQueueId.length === 0) {\n        console.log('фільмів нема');\n        refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n        return;\n    }\n\n    // function checkStorage(key) {\n    //     const arrOfId = JSON.parse(localStorage.getItem(key));\n    //     if (arrOfId === null || arrOfId.length === 0) {\n    //         console.log('Фільмів нема');\n    //         refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n    //         return;\n    //     }\n    //     return arrOfId;\n    // }\n\n    const arrPromisesCards = arrOfQueueId.map(async (el) => {\n        const response = await requestGet(MAIN_PART_URL, MOVIE_BY_ID_PART, el, API_KEY);\n        const objDataMovie = await response.data;\n        console.log(objDataMovie);\n        const genresString = objDataMovie.genres.map(el => el.name).join(', ');\n        // console.log(genresString);\n        const card = makeCard(objDataMovie, genresString);\n        return card;\n    });\n\n    const arrOfCards = await Promise.all(arrPromisesCards);\n    refs.movieList.insertAdjacentHTML('beforeend', arrOfCards.join(''));\n    refs.watchedBtn.addEventListener('click', onWatchedBtnClick);\n}\n\nasync function onWatchedBtnClick() {\n    refs.watchedBtn.removeEventListener('click', onWatchedBtnClick);\n    refs.movieList.innerHTML = '';\n\n    const arrOfWatchedId = JSON.parse(localStorage.getItem(\"watched\"));\n    if (arrOfWatchedId === null || arrOfWatchedId.length === 0) {\n        console.log('фільмів нема');\n        refs.queueBtn.addEventListener('click', onQueueBtnClick);\n        return;\n    }\n\n    const arrPromisesCards = arrOfWatchedId.map(async (el) => {\n        const response = await requestGet(MAIN_PART_URL, MOVIE_BY_ID_PART, el, API_KEY);\n        const objDataMovie = await response.data;\n        const genresString = objDataMovie.genres.map(el => el.name).join(', ');\n        const card = makeCard(objDataMovie, genresString);\n        return card;\n    });\n    const arrOfCards = await Promise.all(arrPromisesCards);\n    refs.movieList.insertAdjacentHTML('beforeend', arrOfCards.join(''));\n    refs.queueBtn.addEventListener('click', onQueueBtnClick);\n}\n\nfunction noPhoto(base_url, width, img_file, stub) {\n    let strM = '';\n    img_file === null ? (strM = stub) : (strM = `${base_url}${width}${img_file}`);\n    return strM;\n}\n\nfunction makeCard(obj, genrStr) {\n    return `\n        <li class=\"movie__card\">\n            <div class=\"movie__img__box\">\n                <picture class=\"film-list__img\">\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        DESKTOP_SIZES,\n                        obj.poster_path,\n                        DESKTOP_STUB\n                      )}\"\n                        media=\"screen and (min-width:1200px)\"\n                    />\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        TABLET_SIZES,\n                        obj.poster_path,\n                        TABLET_STUB\n                      )}\"\n                        media=\"(min-width:768px)\"\n                    />\n                    <source\n                        srcset=\"${noPhoto(\n                        BASE_IMG_URL,\n                        MOBILE_SIZES,\n                        obj.poster_path,\n                        MOBILE_STUB\n                      )}\"\n                        media=\"(max-width:767px)\"\n                    />\n                    <img\n                        class=\"movie__img\"\n                        src=\"./images/no-Film-Img.jpg\"\n                        alt=\"${obj.original_title}\"\n                        width=\"450\"\n                        height=\"294\"\n                        name=\"Poster\"\n                        data-id=\"${obj.id}\"\n                    />\n                </picture>           \n            </div>\n            <div class=\"movie__card__textbox\">\n                <h3 class=\"movie__title\">${obj.original_title}</h3>\n                <span class=\"movie__details\">${genrStr} | </span>\n                <span class=\"movie__details\">${obj.release_date.slice(0, 4)}</span>\n            </div>\n        </li>`;\n}"],"names":["parcelRequire","$bpxeT","$00ac34d59007d814$var$refs","movieList","document","querySelector","watchedBtn","queueBtn","$00ac34d59007d814$var$onQueueBtnClick","$00ac34d59007d814$var$_onQueueBtnClick","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee1","arrOfQueueId","arrPromisesCards","arrOfCards","removeEventListener","innerHTML","JSON","parse","localStorage","getItem","length","console","log","addEventListener","$00ac34d59007d814$var$onWatchedBtnClick","map","_callee","el1","response","objDataMovie","genresString","card","$hANss","requestGet","$fNJtc","MAIN_PART_URL","MOVIE_BY_ID_PART","API_KEY","_ctx","sent","data","genres","el","name","join","$00ac34d59007d814$var$makeCard","Promise","all","_ctx1","insertAdjacentHTML","$00ac34d59007d814$var$_onWatchedBtnClick","_callee2","arrOfWatchedId","el2","_ctx2","$00ac34d59007d814$var$noPhoto","base_url","width","img_file","stub","concat","obj","genrStr","BASE_IMG_URL","DESKTOP_SIZES","poster_path","DESKTOP_STUB","TABLET_SIZES","TABLET_STUB","MOBILE_SIZES","MOBILE_STUB","original_title","id","release_date","slice","setItem","stringify"],"version":3,"file":"my-library.0a32afd7.js.map"}